<% if member.errors.any? %>
  <div id="error_explanation" class='alert alert-danger'>
    <% member.errors.full_messages.each do |message| %>
      <% if message == 'Email has already been taken' %>
        <%= "#{ member.email } is already taken by a member in our database. If this is you we can email you a link so you can alter your details: " %>
        <%= form_tag(request_token_email_path, method: "post") do %>
        <%= hidden_field_tag(:email, member.email) %>
        <%= submit_tag("Request Email") %>
      <% end %>
      <% else %>
      <%= message %>
      <% end %>
    <% end %>
  </div>
<% end %>

<%= form_for([:rsvp, member]) do |f| %>

  <%= hidden_field_tag(:token, token) if token %>


  <% if event %>
    <div class='field'>
      <%= label :rsvp, event.name %>
      <%= select_tag(:rsvp, options_for_select([
      ['Attending', 'attending'],
      ['Not Attending', 'not_attending']
      ], rsvp.status || 'attending')) %>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %>
    <%= f.text_field :title %>
  </div>

  <div class="field">
    <%= f.label :first_name %>
    <%= f.text_field :first_name %>
  </div>

  <div class="field">
    <%= f.label :last_name %>
    <%= f.text_field :last_name %>
  </div>

  <div class="field">
    <%= f.label :job_title %>
    <%= f.text_field :job_title %>
  </div>
  <div class="field">
    <%= f.label :organisation %>
    <%= f.text_field :organisation %>
  </div>
  <div class="field">
    <%= f.label :email %>
    <%= f.text_field :email %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
